<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <title>updating a jekyll/github blog from the iPad, or anywhere, without touching git - hardscrabble</title>
  <meta content='Max Jacobson' name='author'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='/feed.xml' rel='alternate' title='Posts feed' type='application/atom+xml'>
  <link href='/img/favicon.ico' rel='icon' type='image/x-icon'>
  <link rel="stylesheet" href="/css/lib/pinboard.css">
<link rel="stylesheet" href="/css/lib/normalize.css">
<link rel="stylesheet" href="/css/lib/solarized.css">
<link rel="stylesheet" href="/css/style.css">



  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', "UA-4982721-15", 'auto');
  ga('send', 'pageview');

</script>


</head>
<body>

<header>
  <h1><a href="/">hardscrabble</a></h1>
  <nav>
    <a href="/">home</a>
    | <a href="/about/">about</a>
    | <a href="/metaphorloop/">metaphor loop</a>
    | <a href="/search/">search</a>
    | <a href="/links/">links</a>
  </nav>
</header>

<div class="post">

  <div class="metadata">
    <div class="title">
      <h2>
        updating a jekyll/github blog from the iPad, or anywhere, without touching git
      </h2>
    </div>
    <div class="byline">
      by <a href='/about'>Max Jacobson</a>
    </div>
    <div class="date">
      12 Jan 2014
    </div>
  </div>

  <div class="body">
    <p><strong>UPDATE April 2015:</strong> Here’s a much, much better way to do it: <a href="http://www.hardscrabble.net/2015/how-to-jekyll-from-ios/">http://www.hardscrabble.net/2015/how-to-jekyll-from-ios/</a></p>

<p>First of all: if anyone subscribes to my RSS feed, I apologize for flooding it today with test posts as I futzed with this.</p>

<p>Today I wrote my first <a href="http://omz-software.com/editorial/">Editorial</a> workflow and also my first Python script. Fun day!</p>

<p>Editorial is a power user text editor for the iPad. Before today I never really used it but I think I’ll use it more now.</p>

<p>This project was inspired by  <a href="http://www.coreint.org/2013/12/episode-118-wrapping-up-2013/">a recent episode of the tech podcast Core Intuition</a>. They were discussing blogging software. One of the hosts, Daniel Jalkutt, makes the Mac blogging app <a href="http://www.red-sweater.com/marsedit/">MarsEdit</a>, and they’ve both been around long enough to have really interesting thoughts on the space. MarsEdit allows bloggers to post to most of the major blog systems but not static blogs like <a href="http://jekyllrb.com/">Jekyll</a> (what I use for this blog), <a href="http://getpelican.com/">Pelican</a>, <a href="http://octopress.org/">Octopress</a> (which is built on Jekyll), <a href="http://roots.cx/">Roots</a>,  or any number of other, similar projects.</p>

<p>Which is understandable because those don’t really expose an API for it to integrate with. <em>But what if they did?</em> (haha)</p>

<p>I’m going to step away from discussing the broader context of static blog tools and focus specifically on Jekyll blogs deployed to GitHub pages, which is the bulk of my experience.</p>

<p>Here’s how I generally write and publish posts, before today:</p>

<ul>
  <li>clone or pull the git repo</li>
  <li>use <a href="https://rubygems.org/gems/poole">poole</a> to run <code class="highlighter-rouge">poole draft "Title Of Post"</code>, which reates a new markdown file for me</li>
  <li>use vim to write the post</li>
  <li>serve the blog locally to make sure it looks right</li>
  <li>when I’m done, run <code class="highlighter-rouge">poole publish _drafts/title_of_post.md</code>, which moves the file into the <code class="highlighter-rouge">_posts</code> directly and inserts the current time into the configuration at the top</li>
  <li>use git to commit and push the post up to GitHub, which will re-compile the site using <code class="highlighter-rouge">jekyll build</code></li>
</ul>

<p>I can do this easily on the computer and it’s pretty nice. I can do this on the iPad using <a href="http://panic.com/prompt/">Prompt</a> to SSH into a DigitalOcean server and it’s <em>okay</em>. I can do the same on my iPod Touch and it’s kind of awkward and overly small.</p>

<p>There are a few major advantages to having a static blog. To me, the main boon is the lack of a database. It’s definitely an advantage that there’s no server-side computation going on – the HTML is available to serve immediately after being requested – but maybe it’s a disadvantage that there’s no server-side API. In theory, a static blog API could do several things:</p>

<ul>
  <li>create posts</li>
  <li>update posts</li>
  <li>delete posts</li>
  <li>render posts as JSON</li>
</ul>

<p>What I’ve created today only does the first thing. It’s pretty simple. It would need to do all of those, and probably much more I’m not currently imagining, to integrate with something like MarsEdit. But it’s enough to do something pretty cool: now I can write posts in Editorial on my iPad (I’m writing this one that way) which has a browser built-in for research and an embarrassment of possibilities for extensibility because it’s somehow snuck the Python scripting language into Apple’s walled garden.</p>

<p>Here’s a demo video (sorry it’s so long):</p>

<iframe src="//player.vimeo.com/video/83994673" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
<p><a href="http://vimeo.com/83994673">Updating a Jekyll Blog with Editorial</a> from <a href="http://vimeo.com/maxjacobson">Max Jacobson</a> on <a href="https://vimeo.com">Vimeo</a>.</p>

<p>Here’s the source of the Rails project that serves as a Jekyll API: <a href="https://github.com/maxjacobson/jekyll_api">maxjacobson/jekyll_api</a>. Here’s <a href="http://editorial-app.appspot.com/workflow/5026138770374656/tRls0F7xb8s">the Editorial workflow</a> which will currently only work for me, because I’m not sure the best way to share the source for something like this that’s not just a script, but a chain of macros and scripts.</p>

<p>Actually, here’s the most-relevant chunk of the workflow, my first python script, somewhat out of context:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c">#coding: utf-8</span>
<span class="kn">import</span> <span class="nn">workflow</span><span class="o">,</span> <span class="nn">requests</span>

<span class="n">script_params</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">get_parameters</span><span class="p">()</span>

<span class="n">auth_token</span> <span class="o">=</span> <span class="n">script_params</span><span class="p">[</span><span class="s">"auth_token"</span><span class="p">]</span>
<span class="n">blog_id</span> <span class="o">=</span> <span class="n">script_params</span><span class="p">[</span><span class="s">"blog_id"</span><span class="p">]</span>

<span class="n">post_slug</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s">"slug"</span><span class="p">)</span>
<span class="n">post_text</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s">"text"</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'auth_token'</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">,</span>
  <span class="s">'post[slug]'</span><span class="p">:</span> <span class="n">post_slug</span><span class="p">,</span>
  <span class="s">'post[text]'</span><span class="p">:</span> <span class="n">post_text</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">"http://pairwith.maxjacobson.net:3000/blogs/"</span> <span class="o">+</span> <span class="n">blog_id</span> <span class="o">+</span> <span class="s">"/publish"</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
  <span class="n">workflow</span><span class="o">.</span><span class="n">set_output</span><span class="p">(</span><span class="s">"Successfully posted"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">workflow</span><span class="o">.</span><span class="n">set_output</span><span class="p">(</span><span class="s">"Something went wrong"</span><span class="p">)</span>
</code></pre>
</div>

<p>As I mention in the video, <em>in theory</em> I can deploy this app to an actual production environment (note the weird URL if you like) and allow other people to use it. I probably won’t.</p>

<p>Alright now I’m going to press “Post”. I’m kind of nervous! Wish me lu</p>

  </div>

  <div class="post-footer">
    <p>
      Feel free to get in touch via <a href='http://twitter.com/maxjacobson'>@maxjacobson</a> or <a href='mailto:max@hardscrabble.net'>max@hardscrabble.net</a>
    </p>
  </div>

</div>


<footer>
  <div>
    Powered by <a href="http://jekyllrb.com/">Jekyll</a>
    and hosted on <a href="https://pages.github.com/">GitHub Pages</a>.
    The source is <a href="https://github.com/hardscrabble/hardscrabble.github.io">available to browse, for nerds</a>.
    The feed can be found at <a href="/feed.xml">feed.xml</a>
  </div>
</footer>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<script src='/js/vendor/lunr.min.js'></script>
<script src='/js/app.js'></script>


<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100815498); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100815498ns.gif" /></p></noscript>
</body>
</html>

